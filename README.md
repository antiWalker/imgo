# imgo

根据公司客服聊天的业务模型，从架构层面拆分为调度层和工人层的两层架构。

后期如果量大可以:

1.把分发层分发的消息发布到redis里的一个频道里。然后订阅这个频道的进程再做消费，
再打到后面的worker。

2.工人层收到消息后也可以发布到redis队列里面。然后再发送给user。

3.分发层和工人层都可以多台部署，支持分布式。最好跨机房部署一台。防止单机房故障发生。

# data flow
send msg：

php->go dispatcher->go worker->user

数据传递分别采用http和rpc方式。
# 